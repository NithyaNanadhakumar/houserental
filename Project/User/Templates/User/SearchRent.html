
{% extends 'User/Head.html' %}
{% load static %}
{% block content %}



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
</head>
<body>
    <form action="" method="post" id="UsForm" enctype="multipart/form-data" data-sta-url="{% url 'aadmin:Ajax-state' %}" data-dis-url="{% url 'aadmin:Ajax-district' %}" data-pla-url="{% url 'guest:Ajax-place' %}" data-rent-url="{% url 'user:Ajax-rent' %}">
        <table border="1" align="center">
            <tr>
                <td>Country</td>
                <td> 
                    <select name="condrop" id="condrop">
                    <option value="">----SELECT----</option>
                    {% for i in CON %}
                    <option value="{{i.id}}">{{i}}</option>
                    {% endfor %}
                </select>
                </td>
           
                <td>State</td>
                <td>
                    <select name="stadrop" id="stadrop">
                        <option value="">----SELECT----</option>
                    </select>
                </td>
            
                <td>District</td>
                <td>
                    <select name="distdrop" id="distdrop">
                        <option value="">----SELECT----</option>
                    </select>
                </td>
           
                <td>Place</td>
                <td><select name="pladrop" id="pladrop">
                    <option value=""> -SELECT- </option>
                    <option value=""></option>
                </select>
                </td>
            
                <td>RentType</td>
                <td><select name="retdrop" id="rentdrop">
                    <option value="">----SELECT----</option>
                    {% for i in RET %}
                    <option value="{{i.id}}">{{i}}</option>
                    {% endfor %}
                </td>
            </tr>
        </table>
        <div id="data">
            <table align="center" cellpadding="50" style="border-collapse: collapse">
                <tr>
                    {% for i in data %}
    
                    <td>
                        <div style="text-align:center;border:1px solid black;margin:22px;padding:20px">
    
                            <p><img src="{{i.image.url}}" width="100px" height="100px" /></p>
                            <br>
                            <p>Rent Name:{{i.rentname}}</p>
                            <br>
                            <p>Owner Name:{{i.owner.name}}</p>
                            <br>
                            <p>Contact Info:{{i.owner.contact}}</p>
                            <br>
                            <p>Email:{{i.owner.email}}</p>
                            <br>
                            <p><a href="{% url 'user:conf' i.id %}" class="btn btn-success">Book Now</a></p>
                            <br>
                            <p><a href="{% url 'user:gallery' i.id %}" class="btn btn-success">View Gallery</a></p>
                            <br>
                        </div>
                    </td>
                    {% if forloop.counter|divisibleby:4 %}
                </tr>
                <tr>
                    {% endif %}
    
    
                    {% endfor %}
            </table>
            <br><br><br>
        </div>
    
    </form>
</body>
</html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
$("#condrop").change(function () {
    var cid = $(this).val(); 
    var sid=document.getElementById("stadrop").value;
    var did=document.getElementById("distdrop").value;
    var pid=document.getElementById("pladrop").value;
    var rid=document.getElementById("rentdrop").value;
    var ur = $("#UsForm").attr("data-sta-url");
    $.ajax({
        url: ur,
        data: { Cntry: cid, },
        success: function (data) {
            $("#stadrop").html(data);
            var ur = $("#UsForm").attr("data-rent-url");
    $.ajax({
        url: ur,
        data: { cid: cid,sid:sid,did,rid:rid ,pid:pid},
        success: function (data) {
            $("#data").html(data);
        },
    });
        },
    });
});

$("#stadrop").change(function () {
    var sid = $(this).val(); 
    var cid=document.getElementById("condrop").value;
    var did=document.getElementById("distdrop").value;
    var pid=document.getElementById("pladrop").value;
    var rid=document.getElementById("rentdrop").value;
    var ur = $("#UsForm").attr("data-dis-url");
    $.ajax({
        url: ur,
        data: { Cntry: sid, },
        success: function (data) {
            $("#distdrop").html(data);
            var ur = $("#UsForm").attr("data-rent-url");
    $.ajax({
        url: ur,
        data: { cid: cid,sid:sid,did,rid:rid ,pid:pid},
        success: function (data) {
            $("#data").html(data);
        },
    });
        },
    });
});


$("#distdrop").change(function () {
    var did = $(this).val(); 
    var sid=document.getElementById("stadrop").value;
    var cid=document.getElementById("condrop").value;
    var pid=document.getElementById("pladrop").value;
    var rid=document.getElementById("rentdrop").value;

    var ur = $("#UsForm").attr("data-pla-url");
    $.ajax({
        url: ur,
        data: { Cntry: did, },
        success: function (data) {
            $("#pladrop").html(data);
            var ur = $("#UsForm").attr("data-rent-url");
    $.ajax({
        url: ur,
        data: { cid: cid,sid:sid,did,rid:rid ,pid:pid},
        success: function (data) {
            $("#data").html(data);
        },
    });
        },
    });
});   


$("#pladrop").change(function () {
    var pid = $(this).val(); 
    var sid=document.getElementById("stadrop").value;
    var did=document.getElementById("distdrop").value;
    var cid=document.getElementById("condrop").value;
    var rid=document.getElementById("rentdrop").value;
    var ur = $("#UsForm").attr("data-rent-url");
    $.ajax({
        url: ur,
        data: { cid: cid,sid:sid,did,rid:rid ,pid:pid },
        success: function (data) {
            $("#data").html(data);
        },
    });
});   

$("#rentdrop").change(function () {
    var rid = $(this).val(); 
    var sid=document.getElementById("stadrop").value;
    var did=document.getElementById("distdrop").value;
    var cid=document.getElementById("condrop").value;
    var pid=document.getElementById("pladrop").value;
    var ur = $("#UsForm").attr("data-rent-url");
    $.ajax({
        url: ur,
        data: { cid: cid,sid:sid,did,rid:rid ,pid:pid },
        success: function (data) {
            $("#data").html(data);
        },
    });
}); 
</script>

<br><br>

{% endblock content %}